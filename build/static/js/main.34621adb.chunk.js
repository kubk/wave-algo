(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports=n(24)},21:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(10),o=n.n(i),s=n(7),c=n.n(s),u=n(11),l=n(1),h=n(2),f=n(5),v=n(4),m=n(6),d=n(12),b=n.n(d),g=function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"isBacktrace",value:function(e,t,n){return!!t.find(function(t){return e.coordinatesAreTheSame(t,n)})}},{key:"render",value:function(){var e=this,t=this.props,n=t.maze,a=t.backtrace,i=t.onCellClick,o=t.waveColorGenerator;return r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,n.toArray().map(function(t,s){return r.a.createElement("tr",{key:s,className:"row"},t.map(function(t,c){return r.a.createElement("td",{style:n.isWaveStep(t)?{backgroundColor:o.generate(t)}:{},key:c,onClick:function(e){return i(e,[s,c])},onContextMenu:function(e){return i(e,[s,c])},className:b()({cell:!0,wall:n.isWall([s,c]),start:n.isStart([s,c]),finish:n.isFinish([s,c]),backtrace:e.isBacktrace(n,a,[s,c]),wave:n.isWaveStep(t)})},n.isWaveStep(t)?t:"")}))})))}}]),t}(a.Component),k=function(){function e(t){Object(l.a)(this,e),this.waveColorDiff=void 0,this.waveColorDiff=255/t.getWidth()/t.getHeight()*4}return Object(h.a)(e,[{key:"generate",value:function(e){var t=this.getColor(175,e),n=this.getColor(238,e),a=this.getColor(255,e);return"rgb(".concat(t,", ").concat(n,", ").concat(a,")")}},{key:"getColor",value:function(e,t){return Math.floor(e-t*this.waveColorDiff)}}]),e}(),p=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(f.a)(this,Object(v.a)(t).call(this,e))).timeoutIds=[],n.handleClick=function(e,t){e.preventDefault(),n.interruptAnimation();var a=n.state.maze;n.isRightClick(e)?a.setFinish(t):a.setStart(t),n.setState({maze:a,backtrace:[]})},n.interruptAnimation=function(){n.timeoutIds.forEach(clearTimeout)},n.setTimeout=function(e,t){n.timeoutIds.push(setTimeout(e,t))},n.runWaveAlgo=Object(u.a)(c.a.mark(function e(){var t,a,r,i,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.clearWaves(),t=n.props.waveAlgorithm,a=n.state.maze,r=t.propagateWave(a),i=r.waves,o=r.isFinishFound,e.next=6,n.animateWavePropagation(a,i);case 6:o?n.setTimeout(function(){var e=t.generateBacktrace(i,a.getFinish());n.setState({backtrace:e})},500):n.setTimeout(function(){return alert("Cannot find finish")},500);case 7:case"end":return e.stop()}},e,this)})),n.generateNewMaze=function(){n.interruptAnimation();var e=n.props.mazeGenerator.generate();n.setState({maze:e,backtrace:[]})},n.clearWaves=function(){n.interruptAnimation();var e=n.state.maze;e.clearWaves(),n.setState({maze:e,backtrace:[]})},n.state={maze:n.props.mazeGenerator.generate(),backtrace:[]},n}return Object(m.a)(t,e),Object(h.a)(t,[{key:"isRightClick",value:function(e){return 3===e.nativeEvent.which}},{key:"animateWavePropagation",value:function(e,t){var n=this;return new Promise(function(a){for(var r=function(r){n.setTimeout(function(){e.setWaveStep(t[r],r+1),n.setState({maze:e}),r===t.length-2&&a()},200*r)},i=0;i<t.length-1;i++)r(i)})}},{key:"render",value:function(){return r.a.createElement("div",{className:"maze"},r.a.createElement(g,Object.assign({},this.state,{onCellClick:this.handleClick,waveColorGenerator:new k(this.state.maze)})),r.a.createElement("button",{className:"maze-control",onClick:this.runWaveAlgo},"Run wave algorithm"),r.a.createElement("button",{className:"maze-control",onClick:this.generateNewMaze},"Generate new maze"),r.a.createElement("button",{className:"maze-control",onClick:this.clearWaves},"Clear waves"))}}]),t}(r.a.Component),C=(n(21),n(3)),y=n(13),w=n.n(y),W=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"propagateWave",value:function(e){for(var t=this,n=[],a=[],r=[[e.getStart()]],i=function(t){return!a.find(function(n){return e.coordinatesAreTheSame(n,t)})},o=!1;r.length;){var s=r.shift();a.push.apply(a,Object(C.a)(s));var c=s.reduce(function(n,a){var r=t.getNeighbors(a).filter(e.isCellAvailableForMove);return n.concat(r)},[]),u=w()(c,function(e){return"".concat(e[0]).concat(e[1])}).filter(i);if(u.length&&(r.push(u),n.push(u)),u.find(function(t){return e.isFinish(t)})){o=!0;break}}return{waves:n,isFinishFound:o}}},{key:"getNeighbors",value:function(e){return[[e[0]-1,e[1]],[e[0]+1,e[1]],[e[0],e[1]-1],[e[0],e[1]+1]]}},{key:"generateBacktrace",value:function(e,t){for(var n=this,a=[],r=t,i=e.length-1;i>0;i--){var o=e[i-1].find(function(e){return n.isPreviousWave(r,e)});if(!o)throw new Error("Backtrace is invalid");a.push(o),r=o}return a}},{key:"isPreviousWave",value:function(e,t){return t[0]+1===e[0]&&t[1]===e[1]||t[0]===e[0]&&t[1]+1===e[1]||t[0]-1===e[0]&&t[1]===e[1]||t[0]===e[0]&&t[1]-1===e[1]}}]),e}(),S=function(){function e(t,n,a){var r=this;Object(l.a)(this,e),this.boolMatrix=void 0,this.startCell=void 0,this.finishCell=void 0,this.isCellAvailableForMove=function(e){return r.hasCoordinate(e)&&!r.isWall(e)},this.boolMatrix=t,n&&this.setStart(n),a&&this.setFinish(a)}return Object(h.a)(e,[{key:"setStart",value:function(e){if(!this.hasCoordinate(e))throw new Error("Invalid coordinate");this.isWall(e)||this.isFinish(e)||(this.startCell=e,this.clearWaves())}},{key:"isStart",value:function(e){return void 0!==this.startCell&&this.coordinatesAreTheSame(this.startCell,e)}},{key:"isFinish",value:function(e){return void 0!==this.finishCell&&this.coordinatesAreTheSame(this.finishCell,e)}},{key:"coordinatesAreTheSame",value:function(e,t){return e[0]===t[0]&&e[1]===t[1]}},{key:"isWall",value:function(e){return!0===this.boolMatrix[e[0]][e[1]]}},{key:"setFinish",value:function(e){if(!this.hasCoordinate(e))throw new Error("Invalid coordinate: ".concat(e.toString()));this.isWall(e)||this.isStart(e)||(this.finishCell=e,this.clearWaves())}},{key:"hasCoordinate",value:function(e){return void 0!==this.boolMatrix[e[0]]&&void 0!==this.boolMatrix[e[0]][e[1]]}},{key:"getStart",value:function(){return this.startCell}},{key:"getFinish",value:function(){return this.finishCell}},{key:"toArray",value:function(){return this.boolMatrix}},{key:"setWaveStep",value:function(e,t){var n=this;e.forEach(function(e){n.boolMatrix[e[0]][e[1]]=t})}},{key:"clearWaves",value:function(){var e=function(e){return e&&!Number.isInteger(e)};this.boolMatrix=this.boolMatrix.map(function(t){return t.map(e)})}},{key:"isWaveStep",value:function(e){return Number.isInteger(e)}},{key:"getWidth",value:function(){return this.boolMatrix[0].length}},{key:"getHeight",value:function(){return this.boolMatrix.length}}]),e}(),M=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"generate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:28;if(e<2||t<2)throw new Error("Invalid maze params");var n=new S(this.generateBoolMatrix(e,t));return n.setStart(this.findRandomEmptyCell(n,0,3)),n.setFinish(this.findRandomEmptyCell(n,t-4,t-1)),n}},{key:"generateBoolMatrix",value:function(e,t){var n=function(){return Math.random()>.77};return Object(C.a)(Array(e)).map(function(){return Object(C.a)(Array(t)).map(n)})}},{key:"findRandomEmptyCell",value:function(e,t,n){var a=Math.floor(Math.random()*e.getHeight()),r=Math.floor(Math.random()*(n-t+1))+t;return e.isWall([a,r])?this.findRandomEmptyCell(e,t,n):[a,r]}}]),e}(),j=new W,O=new M;o.a.render(r.a.createElement(p,{waveAlgorithm:j,mazeGenerator:O}),document.getElementById("root"))}},[[14,2,1]]]);
//# sourceMappingURL=main.34621adb.chunk.js.map